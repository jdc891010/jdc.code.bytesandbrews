// Enhanced sample data with additional features for spot cards
window.spotsData = {
    internet: [
        {
            id: 1,
            name: "Digital Brew House",
            address: "456 Oak Avenue, Somerset West",
            metricValue: "85.2 Mbps",
            dominantTribe: "Code Conjurers",
            imageUrl: "https://via.placeholder.com/400x300?text=Digital+Brew+House",
            lastTestDate: "March 8, 2025",
            testCount: 27,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R45 - R75",
            ratings: {
                vibe: 4.5,
                noise: 3.2,
                power: 5.0,
                video: 4.8,
                coffee: 4.0,
                price: 3.5,
                staff: 4.2,
                parking: 3.8
            }
        },
        {
            id: 2,
            name: "Bean There Café",
            address: "123 Main Street, Somerset West",
            metricValue: "78.5 Mbps",
            dominantTribe: "Pixel Wizards",
            imageUrl: "https://via.placeholder.com/400x300?text=Bean+There+Cafe",
            lastTestDate: "March 5, 2025",
            testCount: 14,
            handicappedFacilities: false,
            limitedInternet: true,
            averageSpend: "R35 - R60",
            ratings: {
                vibe: 5.0,
                noise: 2.5,
                power: 4.5,
                video: 4.2,
                coffee: 4.8,
                price: 2.8,
                staff: 4.7,
                parking: 2.5
            }
        },
        {
            id: 3,
            name: "Coffee Circuit",
            address: "789 Tech Drive, Somerset West",
            metricValue: "72.3 Mbps",
            dominantTribe: "Strategy Sages",
            imageUrl: "https://via.placeholder.com/400x300?text=Coffee+Circuit",
            lastTestDate: "March 2, 2025",
            testCount: 8,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R50 - R90",
            ratings: {
                vibe: 3.8,
                noise: 4.5,
                power: 3.2,
                video: 3.5,
                coffee: 3.5,
                price: 4.2,
                staff: 3.0,
                parking: 4.5
            }
        }
    ],
    
    vibes: [
        {
            id: 4,
            name: "Green Bean Oasis",
            address: "321 Garden Road, Somerset West",
            metricValue: "Exceptional (4.9/5)",
            dominantTribe: "Word Weavers",
            imageUrl: "https://via.placeholder.com/400x300?text=Green+Bean+Oasis",
            lastTestDate: "March 9, 2025",
            testCount: 32,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R60 - R100",
            ratings: {
                vibe: 4.9,
                noise: 4.5,
                power: 3.8,
                video: 3.5,
                coffee: 4.2,
                price: 3.8,
                staff: 4.7,
                parking: 3.5
            }
        },
        {
            id: 5,
            name: "The Creative Corner",
            address: "567 Artist Lane, Somerset West",
            metricValue: "Excellent (4.8/5)",
            dominantTribe: "Pixel Wizards",
            imageUrl: "https://via.placeholder.com/400x300?text=Creative+Corner",
            lastTestDate: "March 7, 2025",
            testCount: 18,
            handicappedFacilities: false,
            limitedInternet: true,
            averageSpend: "R40 - R70",
            ratings: {
                vibe: 4.8,
                noise: 3.5,
                power: 4.2,
                video: 2.8,
                coffee: 4.5,
                price: 3.2,
                staff: 4.5,
                parking: 2.0
            }
        },
        {
            id: 6,
            name: "Inspiration Brew",
            address: "890 Vision Street, Somerset West",
            metricValue: "Excellent (4.7/5)",
            dominantTribe: "Word Weavers",
            imageUrl: "https://via.placeholder.com/400x300?text=Inspiration+Brew",
            lastTestDate: "March 4, 2025",
            testCount: 15,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R55 - R85",
            ratings: {
                vibe: 4.7,
                noise: 4.0,
                power: 3.5,
                video: 3.2,
                coffee: 4.5,
                price: 3.8,
                staff: 4.2,
                parking: 3.5
            }
        }
    ],
    
    power: [
        {
            id: 7,
            name: "Voltage Café",
            address: "42 Power Avenue, Somerset West",
            metricValue: "Abundant Outlets (5.0/5)",
            dominantTribe: "Code Conjurers",
            imageUrl: "https://via.placeholder.com/400x300?text=Voltage+Cafe",
            lastTestDate: "March 10, 2025",
            testCount: 23,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R65 - R110",
            ratings: {
                vibe: 4.2,
                noise: 3.8,
                power: 5.0,
                video: 4.0,
                coffee: 3.8,
                price: 3.5,
                staff: 4.0,
                parking: 4.5
            }
        },
        {
            id: 8,
            name: "Charged Beans",
            address: "555 Socket Street, Somerset West",
            metricValue: "Plentiful Power (4.8/5)",
            dominantTribe: "Strategy Sages",
            imageUrl: "https://via.placeholder.com/400x300?text=Charged+Beans",
            lastTestDate: "March 6, 2025",
            testCount: 11,
            handicappedFacilities: false,
            limitedInternet: true,
            averageSpend: "R30 - R55",
            ratings: {
                vibe: 4.0,
                noise: 3.5,
                power: 4.8,
                video: 3.7,
                coffee: 4.3,
                price: 3.0,
                staff: 3.8,
                parking: 3.0
            }
        },
        {
            id: 9,
            name: "Watt's Brewing",
            address: "777 Amp Lane, Somerset West",
            metricValue: "Good Access (4.5/5)",
            dominantTribe: "Pixel Wizards",
            imageUrl: "https://via.placeholder.com/400x300?text=Watts+Brewing",
            lastTestDate: "March 1, 2025",
            testCount: 7,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R45 - R80",
            ratings: {
                vibe: 3.8,
                noise: 2.8,
                power: 4.5,
                video: 3.0,
                coffee: 4.6,
                price: 4.2,
                staff: 4.3,
                parking: 3.2
            }
        }
    ],
    
    coffee: [
        {
            id: 10,
            name: "Caffeine Code",
            address: "101 Espresso Drive, Somerset West",
            metricValue: "Specialty (4.8/5)",
            dominantTribe: "Word Weavers",
            imageUrl: "https://via.placeholder.com/400x300?text=Caffeine+Code",
            lastTestDate: "March 9, 2025",
            testCount: 41,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R50 - R85",
            ratings: {
                vibe: 4.5,
                noise: 3.0,
                power: 4.0,
                video: 3.8,
                coffee: 4.8,
                price: 3.0,
                staff: 4.5,
                parking: 4.0
            }
        },
        {
            id: 11,
            name: "Brew Masters",
            address: "202 Bean Boulevard, Somerset West",
            metricValue: "Artisanal (4.7/5)",
            dominantTribe: "Strategy Sages",
            imageUrl: "https://via.placeholder.com/400x300?text=Brew+Masters",
            lastTestDate: "March 8, 2025",
            testCount: 36,
            handicappedFacilities: false,
            limitedInternet: true,
            averageSpend: "R40 - R65",
            ratings: {
                vibe: 4.3,
                noise: 2.5,
                power: 3.5,
                video: 3.0,
                coffee: 4.7,
                price: 2.5,
                staff: 4.8,
                parking: 3.5
            }
        },
        {
            id: 12,
            name: "Java Junction",
            address: "303 Roast Road, Somerset West",
            metricValue: "Premium (4.6/5)",
            dominantTribe: "Code Conjurers",
            imageUrl: "https://via.placeholder.com/400x300?text=Java+Junction",
            lastTestDate: "March 7, 2025",
            testCount: 29,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R55 - R90",
            ratings: {
                vibe: 4.0,
                noise: 3.2,
                power: 4.3,
                video: 3.5,
                coffee: 4.6,
                price: 3.8,
                staff: 4.0,
                parking: 4.2
            }
        }
    ],
    
    parking: [
        {
            id: 13,
            name: "The Parking Lot",
            address: "1200 Space Avenue, Somerset West",
            metricValue: "Abundant (5.0/5)",
            dominantTribe: "Strategy Sages",
            imageUrl: "https://via.placeholder.com/400x300?text=The+Parking+Lot",
            lastTestDate: "March 11, 2025",
            testCount: 19,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R65 - R95",
            ratings: {
                vibe: 3.8,
                noise: 3.5,
                power: 4.0,
                video: 3.2,
                coffee: 4.0,
                price: 3.5,
                staff: 4.0,
                parking: 5.0
            }
        },
        {
            id: 14,
            name: "Drive & Code",
            address: "450 Garage Street, Somerset West",
            metricValue: "Excellent (4.8/5)",
            dominantTribe: "Code Conjurers",
            imageUrl: "https://via.placeholder.com/400x300?text=Drive+And+Code",
            lastTestDate: "March 9, 2025",
            testCount: 14,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R45 - R75",
            ratings: {
                vibe: 4.2,
                noise: 3.0,
                power: 4.5,
                video: 3.8,
                coffee: 3.5,
                price: 4.0,
                staff: 3.8,
                parking: 4.8
            }
        },
        {
            id: 15,
            name: "Park & Percolate",
            address: "789 Lot Lane, Somerset West",
            metricValue: "Great (4.5/5)",
            dominantTribe: "Word Weavers",
            imageUrl: "https://via.placeholder.com/400x300?text=Park+And+Percolate",
            lastTestDate: "March 7, 2025",
            testCount: 11,
            handicappedFacilities: false,
            limitedInternet: true,
            averageSpend: "R35 - R60",
            ratings: {
                vibe: 4.0,
                noise: 3.2,
                power: 3.5,
                video: 3.0,
                coffee: 4.2,
                price: 3.5,
                staff: 4.5,
                parking: 4.5
            }
        }
    ],
    
    stability: [
        {
            id: 16,
            name: "Stable Connection",
            address: "100 Reliable Road, Somerset West",
            metricValue: "99.9% Uptime",
            dominantTribe: "Code Conjurers",
            imageUrl: "https://via.placeholder.com/400x300?text=Stable+Connection",
            lastTestDate: "March 12, 2025",
            testCount: 45,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R55 - R90",
            ratings: {
                vibe: 4.0,
                noise: 3.5,
                power: 4.2,
                video: 4.5,
                coffee: 3.8,
                price: 3.5,
                staff: 4.0,
                parking: 3.5
            }
        },
        {
            id: 17,
            name: "No-Drop Cafe",
            address: "250 Signal Street, Somerset West",
            metricValue: "99.5% Uptime",
            dominantTribe: "Pixel Wizards",
            imageUrl: "https://via.placeholder.com/400x300?text=No+Drop+Cafe",
            lastTestDate: "March 10, 2025",
            testCount: 38,
            handicappedFacilities: false,
            limitedInternet: true,
            averageSpend: "R40 - R70",
            ratings: {
                vibe: 4.5,
                noise: 2.8,
                power: 4.0,
                video: 4.2,
                coffee: 4.5,
                price: 3.2,
                staff: 4.2,
                parking: 3.0
            }
        },
        {
            id: 18,
            name: "Consistent Coffee",
            address: "375 Steady Lane, Somerset West",
            metricValue: "99.2% Uptime",
            dominantTribe: "Strategy Sages",
            imageUrl: "https://via.placeholder.com/400x300?text=Consistent+Coffee",
            lastTestDate: "March 8, 2025",
            testCount: 32,
            handicappedFacilities: true,
            limitedInternet: false,
            averageSpend: "R50 - R85",
            ratings: {
                vibe: 3.8,
                noise: 3.0,
                power: 3.5,
                video: 4.0,
                coffee: 4.2,
                price: 3.8,
                staff: 3.5,
                parking: 4.0
            }
        }
    ]
};

// Icons for different metric types
window.metricIcons = {
    internet: "fas fa-wifi",
    vibes: "fas fa-star",
    power: "fas fa-plug",
    coffee: "fas fa-coffee",
    parking: "fas fa-car",
    stability: "fas fa-signal"
};

// Description for each metric type
window.metricDescriptions = {
    internet: "Average download speed based on real user tests",
    vibes: "Atmosphere score based on user ratings",
    power: "Power outlet accessibility rating from user reviews",
    coffee: "Coffee quality rating by digital nomads",
    parking: "Parking availability rating from user experiences",
    stability: "Connection reliability rating from user experiences"
};

// Placeholder for adding confidence tooltips
window.confidenceTooltips = {
    low: "Based on a few tests. Results may vary.",
    medium: "Based on a moderate number of tests. Fairly reliable.",
    high: "Based on many tests. Highly reliable data."
};

// Function to get confidence level based on test count
window.getConfidenceLevel = function(testCount) {
    if (testCount >= 20) return 'high';
    if (testCount >= 10) return 'medium';
    return 'low';
};

// Get color based on rating
window.getColorForRating = function(rating) {
    if (rating >= 4.5) return '#10b981'; // Green
    if (rating >= 3.5) return '#3b82f6'; // Blue
    if (rating >= 2.5) return '#f59e0b'; // Orange
    return '#ef4444'; // Red
};

// Generate HTML for dot rating
window.generateDotRating = function(rating) {
    const fullDots = Math.floor(rating);
    const halfDot = rating % 1 >= 0.5;
    const emptyDots = 5 - fullDots - (halfDot ? 1 : 0);
    
    return `${'<span class="dot full"></span>'.repeat(fullDots)}
            ${halfDot ? '<span class="dot half"></span>' : ''}
            ${'<span class="dot empty"></span>'.repeat(emptyDots)}`;
};

// Generate confidence indicator based on test count
window.generateConfidenceIndicator = function(testCount) {
    const confidence = window.getConfidenceLevel(testCount);
    const tooltip = window.confidenceTooltips[confidence];
    
    return `<div class="confidence ${confidence}" title="${tooltip}">
                <span class="dot"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </div>`;
};

// Format date to be more human-readable
window.formatTestDate = function(dateString) {
    if (!dateString) return 'Recently';
    
    const date = new Date(dateString);
    const now = new Date();
    const diffTime = Math.abs(now - date);
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    if (diffDays <= 1) return 'Today';
    if (diffDays <= 2) return 'Yesterday';
    if (diffDays <= 7) return `${diffDays} days ago`;
    
    const month = date.toLocaleString('default', { month: 'long' });
    return `${month} ${date.getDate()}, ${date.getFullYear()}`;
};

// Export the data (if using modules)
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { 
        spotsData: window.spotsData, 
        metricIcons: window.metricIcons,
        metricDescriptions: window.metricDescriptions,
        confidenceTooltips: window.confidenceTooltips,
        getConfidenceLevel: window.getConfidenceLevel,
        getColorForRating: window.getColorForRating,
        generateDotRating: window.generateDotRating,
        generateConfidenceIndicator: window.generateConfidenceIndicator,
        formatTestDate: window.formatTestDate
    };
}