<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Brews and Bytes</title>
  <!-- Include your CSS files here -->
  <link rel="stylesheet" href="styles.css">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
  <div class="app-container">
    <!-- Main content with spot cards would go here -->
    <div class="main-screen">
      <h1 class="main-title">Brews and Bytes</h1>
      <h2 class="sub-title">Find your perfect coffee shop workspace</h2>
      
      <!-- Sample Spot Cards Grid -->
      <div class="spot-grid" id="spot-grid">
        <!-- Spot cards will be generated by JavaScript -->
      </div>
    </div>

    <!-- Overlay for detailed view -->
    <div class="overlay hidden" id="overlay">
      <!-- The 'hidden' class is added initially -->
      <div class="detail-container">
        <!-- Header -->
        <div class="detail-header">
          <h2 class="detail-title" id="detail-title">Coffee Shop Name</h2>
          <button class="close-button" id="close-button">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <!-- Content -->
        <div class="detail-content">
          <div class="content-grid two-column-grid">
            <!-- Left Column -->
            <div class="left-column">
              <!-- Location Info -->
              <div class="detail-card">
                <h3 class="section-title">Location Details</h3>

              <div class="info-section">
                <div class="address-section">
                  <div class="info-row">
                    <i class="fas fa-map-marker-alt info-icon"></i>
                    <p class="address-text" id="address-text">12 Bright Street, Somerset West, Cape Town</p>
                  </div>
                  <div class="info-row" id="location-spend-row">
                    <i class="fas fa-money-bill-wave info-icon"></i>
                    <p class="location-spend-text" id="location-spend-text">Average Spend: R45 - R75</p>
                  </div>
                  <div class="info-row" id="location-internet-row">
                    <i class="fas fa-wifi info-icon"></i>
                    <p class="location-internet-text" id="location-internet-text">Internet: Limited</p>
                  </div>
                  <div class="info-row" id="location-handicapped-row">
                    <i class="fas fa-wheelchair info-icon"></i>
                    <p class="location-handicapped-text" id="location-handicapped-text">Handicapped Facilities: Yes</p>
                  </div>
                  <div class="map-links">
                    <a href="#" class="map-link">
                      Google Maps <i class="fas fa-external-link-alt"></i>
                    </a>
                    <a href="#" class="map-link">
                      Apple Maps <i class="fas fa-external-link-alt"></i>
                    </a>
                    <a href="#" class="map-link">
                      Uber <i class="fas fa-location-arrow"></i>
                    </a>
                  </div>
                </div>

                <div class="info-row">
                  <i class="fas fa-clock info-icon"></i>
                  <div>
                    <p class="hours-text" id="hours-text">Hours: 7:00am - 6:00pm</p>
                  </div>
                </div>

                <div class="info-row">
                  <i class="fas fa-phone info-icon"></i>
                  <div>
                    <p class="phone-text" id="phone-text">+27 21 851 5555</p>
                    <a href="#" class="call-link">Call for bookings</a>
                  </div>
                </div>

                <div class="divider"></div>

                <div class="rating-section">
                  <div class="rating-row">
                    <div class="rating-text">Google Rating: <span class="rating-value"
                        id="rating-value">4.7/5</span>
                    </div>
                    <div class="review-count" id="review-count">(356 reviews)</div>
                  </div>
                  <div class="stars" id="stars">
                    <!-- Stars will be inserted by JavaScript -->
                  </div>
                </div>

                <div class="divider"></div>

                <div class="tribes-section">
                  <h4 class="sub-section-title">Popular Among:</h4>
                  <div class="tribes-container" id="tribes-container">
                    <!-- Tribes will be inserted by JavaScript -->
                  </div>
                </div>

                <div class="divider"></div>

                <div class="rankings-section">
                  <h4 class="sub-section-title">Rankings:</h4>
                  <div class="rankings-grid">
                    <div class="ranking-item wifi-ranking">
                      <div class="ranking-label">Wi-Fi Speed</div>
                      <div class="ranking-value" id="speed-rank">#1</div>
                    </div>
                    <div class="ranking-item vibe-ranking">
                      <div class="ranking-label">Vibe</div>
                      <div class="ranking-value" id="vibe-rank">#2</div>
                    </div>
                    <div class="ranking-item parking-ranking">
                      <div class="ranking-label">Parking</div>
                      <div class="ranking-value" id="parking-rank">#3</div>
                    </div>
                    <div class="ranking-item noise-ranking">
                      <div class="ranking-label">Noise</div>
                      <div class="ranking-value" id="noise-rank">#2</div>
                    </div>
                  </div>
                  
                  <!-- Overall Score Container -->
                  <div id="overall-score-container" class="overall-score-container">
                    <h4 class="sub-section-title">Overall Workspace Score:</h4>
                    <div class="overall-score">4.2<span class="score-unit">/5</span></div>
                  </div>
                </div>
              </div>
              </div>
            </div>
            
            <!-- Comments section (moved from right column) -->
            <div class="detail-card">
              <h3 class="section-title">What People Are Saying</h3>
              <div class="comments-container" id="comments-container">
                <!-- Comments will be inserted by JavaScript -->
              </div>
            </div>
          </div>
          
          <!-- Right Column -->
          <div class="right-column">
            <!-- Heatmap section -->
            <div class="detail-card">
              <div class="metric-header">
                <h3 class="section-title" id="metric-title">Wi-Fi Speed Heatmap</h3>

                <div class="metric-buttons">
                  <button class="metric-button active" id="speed-button">
                    <i class="fas fa-wifi"></i> Speed
                  </button>
                  <button class="metric-button" id="vibe-button">
                    <i class="fas fa-comment"></i> Vibe
                  </button>
                  <button class="metric-button" id="parking-button">
                    <i class="fas fa-car"></i> Parking
                  </button>
                  <button class="metric-button" id="noise-button">
                    <i class="fas fa-volume-down"></i> Noise
                  </button>
                </div>
              </div>

              <p class="metric-description" id="metric-description">Median Mbps by day and time</p>

              <!-- Heatmap -->
              <div class="heatmap-container">
                <div class="heatmap-wrapper">
                  <!-- X-axis labels -->
                  <div class="x-axis-labels" id="x-axis-labels">
                    <!-- Time labels will be inserted by JavaScript -->
                  </div>

                  <!-- Heatmap grid -->
                  <div class="heatmap-grid" id="heatmap-grid">
                    <!-- Heatmap cells will be inserted by JavaScript -->
                  </div>
                </div>
              </div>

              <!-- Heatmap legend -->
              <div class="heatmap-legend">
                <h4 class="legend-title" id="legend-title">Speed legend (Mbps):</h4>

                <div class="legend-items" id="speed-legend">
                  <div class="legend-item">
                    <div class="legend-color speed-color-1"></div>
                    &lt;10
                  </div>
                  <div class="legend-item">
                    <div class="legend-color speed-color-2"></div>
                    10-20
                  </div>
                  <div class="legend-item">
                    <div class="legend-color speed-color-3"></div>
                    20-30
                  </div>
                  <div class="legend-item">
                    <div class="legend-color speed-color-4"></div>
                    30-40
                  </div>
                  <div class="legend-item">
                    <div class="legend-color speed-color-5"></div>
                    40-60
                  </div>
                  <div class="legend-item">
                    <div class="legend-color speed-color-6"></div>
                    60+
                  </div>
                </div>

                <div class="legend-items hidden" id="vibe-legend">
                  <div class="legend-item">
                    <div class="legend-color vibe-color-1"></div>
                    &lt;2.5
                  </div>
                  <div class="legend-item">
                    <div class="legend-color vibe-color-2"></div>
                    2.5-3
                  </div>
                  <div class="legend-item">
                    <div class="legend-color vibe-color-3"></div>
                    3-3.5
                  </div>
                  <div class="legend-item">
                    <div class="legend-color vibe-color-4"></div>
                    3.5-4
                  </div>
                  <div class="legend-item">
                    <div class="legend-color vibe-color-5"></div>
                    4-4.5
                  </div>
                  <div class="legend-item">
                    <div class="legend-color vibe-color-6"></div>
                    4.5+
                  </div>
                </div>

                <div class="legend-items hidden" id="parking-legend">
                  <div class="legend-item">
                    <div class="legend-color parking-color-1"></div>
                    Very Limited
                  </div>
                  <div class="legend-item">
                    <div class="legend-color parking-color-2"></div>
                    Limited
                  </div>
                  <div class="legend-item">
                    <div class="legend-color parking-color-3"></div>
                    Moderate
                  </div>
                  <div class="legend-item">
                    <div class="legend-color parking-color-4"></div>
                    Good
                  </div>
                  <div class="legend-item">
                    <div class="legend-color parking-color-5"></div>
                    Very Good
                  </div>
                  <div class="legend-item">
                    <div class="legend-color parking-color-6"></div>
                    Excellent
                  </div>
                </div>

                <div class="legend-items hidden" id="noise-legend">
                  <div class="legend-item">
                    <div class="legend-color noise-color-1"></div>
                    Very Noisy
                  </div>
                  <div class="legend-item">
                    <div class="legend-color noise-color-2"></div>
                    Noisy
                  </div>
                  <div class="legend-item">
                    <div class="legend-color noise-color-3"></div>
                    Moderate
                  </div>
                  <div class="legend-item">
                    <div class="legend-color noise-color-4"></div>
                    Quiet
                  </div>
                  <div class="legend-item">
                    <div class="legend-color noise-color-5"></div>
                    Very Quiet
                  </div>
                  <div class="legend-item">
                    <div class="legend-color noise-color-6"></div>
                    Silent
                  </div>
                </div>
              </div>

              <!-- Quick stats -->
              <div class="stats-grid" id="stats-container">
                <!-- Stats will be inserted by JavaScript -->
              </div>
            </div>

            <!-- Talking points with improved styling -->
            <div class="detail-card talking-points-card">
              <h3 class="section-title" id="talking-points-title">Talking Points with Code Conjurers</h3>
              <div class="talking-points-container">
                <div class="talking-points" id="talking-points">
                  <div class="dos-section">
                    <h4 class="sub-section-title">Do's:</h4>
                    <ul class="talking-points-list" id="dos-list">
                      <!-- Do's will be inserted by JavaScript -->
                    </ul>
                  </div>
                  <div class="donts-section">
                    <h4 class="sub-section-title">Don'ts:</h4>
                    <ul class="talking-points-list" id="donts-list">
                      <!-- Don'ts will be inserted by JavaScript -->
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Radar chart - Hidden but kept for JavaScript functionality -->
            <div class="detail-card collapsible hidden" id="radar-chart-card">
              <div class="collapsible-header">
                <h3 class="section-title">Overall Workspace Rating</h3>
                <button class="toggle-button">
                  <i class="fas fa-chevron-down"></i>
                </button>
              </div>
              <div class="collapsible-content">
                <div class="radar-chart-container">
                  <canvas id="radar-chart"></canvas>
                </div>
                <!-- Radar chart will be rendered here when expanded -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Helper script for talking points -->
    <script>
      // Ensure talking points structure exists
      window.ensureTalkingPointsStructure = function() {
        const talkingPointsContainer = document.getElementById('talking-points');
        if (!talkingPointsContainer) {
          console.warn('Talking points container not found, creating one');
          const talkingPointsCard = document.querySelector('.detail-card');
          if (talkingPointsCard) {
            const newContainer = document.createElement('div');
            newContainer.id = 'talking-points';
            newContainer.className = 'talking-points';
            newContainer.innerHTML = `
              <div class="dos-section">
                <h4 class="sub-section-title">Do's:</h4>
                <ul class="talking-points-list" id="dos-list"></ul>
              </div>
              <div class="donts-section">
                <h4 class="sub-section-title">Don'ts:</h4>
                <ul class="talking-points-list" id="donts-list"></ul>
              </div>
            `;
            talkingPointsCard.appendChild(newContainer);
          }
        }
      };
    </script>

    <!-- Sample data script (only for demonstration) -->
    <script>
      // Sample data for demonstration
      window.placeCardSpotsData = [
        {
          id: 1,
          name: "Bootlegger Coffee Company",
          address: "12 Bright Street, Somerset West, Cape Town",
          phone: "+27 21 851 5555",
          googleRating: 4.7,
          googleReviews: 356,
          hours: {
            open: "07:00",
            close: "18:00"
          },
          tribes: ["Code Conjurers", "Pixel Pixies", "Word Weavers"],
          dominantTribe: "Code Conjurers",
          speedRank: 1,
          vibeRank: 2,
          parkingRank: 3,
          noiseRank: 2,
          ratings: {
            speed: 4.8,
            vibe: 4.5,
            noise: 3.9,
            parking: 3.6
          },
          comments: [
            { 
              user: "JakeD", 
              text: "Great Wi-Fi speeds and plenty of outlets. Perfect for coding sessions!", 
              sentiment: "positive", 
              tribe: "Code Conjurer",
              rating: 4.8,
              date: "2024-09-12"
            },
            { 
              user: "LisaM", 
              text: "The lighting is perfect for design work, and the coffee is amazing.", 
              sentiment: "positive", 
              tribe: "Pixel Pixie",
              rating: 4.7,
              date: "2024-09-05"
            }
          ]
        },
        {
          id: 2,
          name: "Blue Crane Coffee",
          address: "25 Main Road, Somerset West",
          phone: "+27 21 852 6666",
          googleRating: 4.4,
          googleReviews: 210,
          hours: {
            open: "07:30",
            close: "17:30"
          },
          tribes: ["Word Weavers", "Pixel Pixies", "Story Spinners"],
          dominantTribe: "Word Weavers",
          speedRank: 3,
          vibeRank: 1,
          parkingRank: 2,
          noiseRank: 1,
          ratings: {
            speed: 4.2,
            vibe: 4.6,
            noise: 4.2,
            parking: 4.1
          },
          comments: [
            { 
              user: "SarahJ", 
              text: "Such a peaceful environment. The quiet corners are perfect for writing.", 
              sentiment: "positive", 
              tribe: "Word Weaver",
              rating: 4.8,
              date: "2024-09-10"
            }
          ]
        }
      ];
    </script>

    <!-- Chart.js for radar chart -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    
    <!-- Main coffee shop card script -->
    <script src="place-card.js"></script>
    
    <!-- Connector script for spot cards and place card -->
    <script src="spot-place-card-connector.js"></script>
    
    <!-- Initialization script -->
    <script>
      // Initialize the spot cards once the DOM is loaded
      document.addEventListener('DOMContentLoaded', function() {
        // Create spot cards for the main grid
        if (window.placeCardSpotsData && Array.isArray(window.placeCardSpotsData)) {
          const spotGrid = document.getElementById('spot-grid');
          if (spotGrid) {
            window.placeCardSpotsData.forEach(spot => {
              const spotCard = createSpotCard(spot);
              spotGrid.appendChild(spotCard);
            });
          }
        }
      });

      // Function to create a spot card
      function createSpotCard(spot) {
        const card = document.createElement('div');
        card.className = 'spot-card';
        card.setAttribute('data-id', spot.id);
        
        card.innerHTML = `
          <div class="spot-content">
            <h3 class="spot-name">${spot.name}</h3>
            <p class="spot-address">${spot.address}</p>
            
            <div class="spot-metrics">
              <div class="spot-metric">
                <i class="fas fa-wifi spot-metric-icon metric-speed"></i>
                <span class="spot-metric-text">${spot.ratings?.speed || 4.0}/5</span>
              </div>
              <div class="spot-metric">
                <i class="fas fa-comment spot-metric-icon metric-vibe"></i>
                <span class="spot-metric-text">${spot.ratings?.vibe || 4.0}/5</span>
              </div>
              <div class="spot-metric">
                <i class="fas fa-car spot-metric-icon metric-parking"></i>
                <span class="spot-metric-text">${spot.ratings?.parking || 3.5}/5</span>
              </div>
            </div>
            
            <div class="spot-tribes">
              ${spot.tribes.map((tribe, index) => 
                `<span class="tribe-tag ${index === 0 ? 'dominant-tribe' : ''}">${tribe}</span>`
              ).join('')}
            </div>
          </div>
        `;
        
        // Add click event to open detail view
        card.addEventListener('click', function() {
          if (typeof openBrewsAndBytesSpotDetail === 'function') {
            openBrewsAndBytesSpotDetail(spot.id);
          }
        });
        
        return card;
      }
    </script>
  </div>
</body>

</html>